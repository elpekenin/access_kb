\newcommand{\myname}{Pablo Martínez Bernal}
\newcommand{\mytitle}{Desarrollo de un teclado para el S.XXI, personalizable y con QMK}

\documentclass[11pt]{report}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{fontawesome} %icons

% Unicode chars
\usepackage{pmboxdraw}

% Images
\usepackage{graphicx}
\usepackage{float}
\usepackage{caption}
\usepackage{subcaption}

% Links
\usepackage[hidelinks]{hyperref}
  \hypersetup{
    pdfauthor={\myname},
    pdftitle={\mytitle}
  }

% References
\usepackage{csquotes}
\usepackage[spanish,activeacute]{babel}
\usepackage[
    backend=biber,
    sorting=none,
    citestyle=numeric,
    bibstyle=science
]{biblatex}
  \addbibresource{references.bib}

% Avoid indenting each line
  \setlength{\parindent}{0pt}

% Custom colors
\usepackage[dvipsnames]{xcolor}
  \definecolor{white}{RGB}{255,255,255}
\usepackage[most]{tcolorbox}
  
% Blocks of code
\usepackage{listings}
  \lstdefinestyle{cliStyle}{
    basicstyle=\ttfamily\small\color{white},
    backgroundcolor=\color{black},
    numbers=none,
    breakatwhitespace=false,
    breaklines=true,
    keepspaces=true,
    showspaces=false,
    showstringspaces=false,
    showtabs=false,
    tabsize=2,
    framerule=0pt,
    framexleftmargin=-0.3cm,
    frame=lr,
    framesep=8pt,
    inputencoding=utf8,
  }
  \lstset{style=cliStyle}
  \renewcommand{\lstlistingname}{Código}%

% Front page
\usepackage{tikzpagenodes}
\usepackage{ragged2e}
  \addto\captionsspanish{\renewcommand{\contentsname}{Índice}}

% Page format
\usepackage[margin=2cm, top=2cm, includefoot]{geometry}
  \addtolength{\topmargin}{-1cm}
\usepackage{fancyhdr}
  \renewcommand{\chaptermark}[1]{\markboth{#1}{}}
  \setlength{\headheight}{60pt}
  \pagestyle{fancy}
  \fancyhf{}
  \fancyfoot[C]{\thepage}
  \lhead{
    \hyperref[chapter:contents]{\includegraphics[height=20pt]{images/UPCT-header.png}}
    \ifnum\value{chapter}=0 {}
    \else {{\hfill \Large \thechapter\ \itshape $\vert$ \leftmark \hspace{5cm} \hfill}}
    \fi
} 
% \rhead{\includegraphics[height=35pt]{image.png}}
\renewcommand{\headrulewidth}{3pt}
\renewcommand{\headrule}{\hbox to\headwidth{\color{RoyalBlue}\leaders\hrule height \headrulewidth\hfill}}

% Chapter format
\usepackage{chngcntr}
  \counterwithout{figure}{chapter}
  \counterwithout{table}{chapter}
\usepackage{etoolbox}
\usepackage[Glenn]{fncychap}
  \addto\captionsspanish{\renewcommand{\chaptername}{Sección}}
\makeatletter
\patchcmd{\@makechapterhead}{\vspace*{50\p@}}{\vspace*{-20\p@}}{}{}
\patchcmd{\@makeschapterhead}{\vspace*{50\p@}}{\vspace*{-20\p@}}{}{}
\patchcmd{\DOTI}{\vskip 80\p@}{\vskip 40\p@}{}{}
\patchcmd{\DOTIS}{\vskip 40\p@}{\vskip 0\p@}{}{}
\makeatother

% -- Custom functions
% Like break for CLI blocks
\newcommand{\mybreak}{\newline\hspace*{.5cm}}

% CLI
\newcommand{\cliarrow}{\textcolor{red}{\ttfamily\bfseries > }}

\DeclareTotalTCBox{\cli}{ v }
  {verbatim,colupper=white,colback=black!75!white,colframe=black}
  {\cliarrow \lstinline[language=command.com,keywordstyle=\color{blue!35!white}\bfseries]^#1^}

\newtcolorbox{multicli}{colupper=white, colback=black!75!white}
\newcommand{\mytab}{\hphantom{0.2cm}}

\newcommand{\icode}[1]{\tcbox[on line,top=-2pt,bottom=-2pt, left=-3pt, right=-3pt,colupper=black,colback=lightgray, colframe=lightgray]{#1}}

% Crediting on the right
\newcommand{\credit}[1]{%
  \begin{flushright}
    \item #1
  \end{flushright}
}

% Image
\newcommand{\image}[3]{%name, width, caption
  \begin{figure}[H]
    \centering
    \includegraphics[width=#2]{images/#1}
    \caption{#3}
  \end{figure}
}

% Code
\colorlet{punct}{red!60!black}
\definecolor{delim}{RGB}{20,105,176}
\colorlet{numb}{magenta!60!black}
\lstdefinelanguage{json}{
    basicstyle=\normalfont\ttfamily,
    numbers=left,
    numberstyle=\scriptsize,
    stepnumber=1,
    numbersep=8pt,
    showstringspaces=false,
    breaklines=true,
    frame=lines,
    literate=
     *{0}{{{\color{numb}0}}}{1}
      {1}{{{\color{numb}1}}}{1}
      {2}{{{\color{numb}2}}}{1}
      {3}{{{\color{numb}3}}}{1}
      {4}{{{\color{numb}4}}}{1}
      {5}{{{\color{numb}5}}}{1}
      {6}{{{\color{numb}6}}}{1}
      {7}{{{\color{numb}7}}}{1}
      {8}{{{\color{numb}8}}}{1}
      {9}{{{\color{numb}9}}}{1}
      {:}{{{\color{punct}{:}}}}{1}
      {,}{{{\color{punct}{,}}}}{1}
      {\{}{{{\color{delim}{\{}}}}{1}
      {\}}{{{\color{delim}{\}}}}}{1}
      {[}{{{\color{delim}{[}}}}{1}
      {]}{{{\color{delim}{]}}}}{1},
}

\definecolor{darkgray}{rgb}{.4,.4,.4}
\definecolor{purple}{rgb}{0.65, 0.12, 0.82}
\lstdefinelanguage{JavaScript}{
  keywords={typeof, new, true, false, catch, function, return, null, catch, switch, var, if, in, while, do, else, case, break},
  keywordstyle=\color{blue}\bfseries,
  ndkeywords={class, export, boolean, throw, implements, import, this},
  ndkeywordstyle=\color{darkgray}\bfseries,
  identifierstyle=\color{black},
  sensitive=false,
  comment=[l]{//},
  morecomment=[s]{/*}{*/},
  commentstyle=\color{purple}\ttfamily,
  stringstyle=\color{red}\ttfamily,
  morestring=[b]',
  morestring=[b]"
}

\lstdefinestyle{codeStyle}{
basicstyle=\ttfamily\small\color{black},
  backgroundcolor=\color{white},
  numbers=none,
  breakatwhitespace=false,
  breaklines=true,
  keepspaces=true,
  showspaces=false,
  showstringspaces=false,
  showtabs=false,
  tabsize=2,
  framerule=3cm,
  frame=none,
  framesep=0pt,
  inputencoding=utf8,
  framexleftmargin=-3cm,
  framexrightmargin=-3cm,
  morecomment=[f][\color{green}]{+\ },
  morecomment=[f][\color{red}]{-\ },
}
\newcommand{\code}[2]{%location, name
  \codecounter{#1}{#2}{}
}

\newcommand{\codecounter}[3]{%location, name, counter
  \begin{tcolorbox}[title=\faCode \ \ \ \texttt{#1/#2}, breakable, colback=white]
    \lstinputlisting[
      style=codeStyle,
    ]{snippets/#2#3}
  \end{tcolorbox}
  \lstset{style=cliStyle}
}


% Emphasis
\newcommand{\myemph}[1]{\textbf{\textit{#1}}}

% Line separator
\newcommand{\hr}{\par\vspace{-.5\ht\strutbox}\hrulefill\par}
